<div class="table-container">
  <h1  class="title">Inventory of assets</h1>
  <div class="control-panel">
    <button  type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#AddModal" (click)="errase()">Ajouter</button>
  </div>
  <!--Add Modal-->
  <div class="modal fade" id="AddModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5  class="modal-title" id="exampleModalLabel">Ajouter un Actif</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
         
            <div class="form-container">


          
              
              <div class="form-group">
                <label  for="type">Type</label>
                <select name="type" [(ngModel)]="asset.type" >
                  <option >software</option>
                  <option >hardware</option>
                  <option >people</option>
                  <option >object</option>
                </select>
              </div>

              

              <label class="custom-label" for="vendors">Vendor</label>
                  
              <div class="custom-left-aligned-container">
                <div class="custom-input-container">
                  <div class="custom-input-wrapper">
                    <ejs-autocomplete [(ngModel)]="asset.vendor" id="vendors" #remote [dataSource]="Vendors" [suggestionCount]="suggestionCount"
                      filterType="StartsWith" [autofill]="true" [placeholder]="remoteWaterMark" sortOrder="Ascending"
                      (click)="showSuggestions()">
                    </ejs-autocomplete>
                  </div>
                </div>
              </div>
              <label class="custom-label" for="name">Product</label>
              
              <div class="custom-left-aligned-container">
                <div class="custom-input-container">
                  <div class="custom-input-wrapper">
                    <ejs-autocomplete [(ngModel)]="asset.product" id="products" #remoteProduct [dataSource]="ProductListe"
                      [suggestionCount]="suggestionCount" filterType="StartsWith" [autofill]="true" [placeholder]="remoteWaterMark"
                      sortOrder="Ascending" (click)="filltheBlanks2(asset.vendor)">
                    </ejs-autocomplete>
                  </div>
                </div>
              </div>
              <label class="custom-label" for="name">Version</label>
              <div class="custom-left-aligned-container">
                <div class="custom-input-container">
                  <div class="custom-input-wrapper">
                    
                    <ejs-autocomplete [(ngModel)]="asset.version" id="version" #remoteVersion [dataSource]="VersionListe"
                      [suggestionCount]="suggestionCount" filterType="StartsWith" [autofill]="true" [placeholder]="remoteWaterMark"
                      sortOrder="Ascending" (click)="filltheBlacks3(asset.product)">
                    </ejs-autocomplete>
                  </div>
                </div>
              </div>
              










            

<!--                      !!!!!!!!!!!!!!!!!! ATTENTION !!!!!!!!!!!!!!!!!!!!






              <div class="form-group">
                <label  for="vendor">Vendor</label>
                <input type="text" name="vendor" [(ngModel)]="asset.vendor" (input)="filterVendors()" required  value="{{vendor}}">
                <select [(ngModel)]="asset.vendor" (change)="filterVendors()">
                  <option *ngFor="let vendor of filtredVendors | slice:0:100" [value]="vendor" (click)="filltheBlanks2(vendor)">{{ vendor }}</option>
                </select>
                <button type="button" (click)="afficherFiltredVendors()">afficher filtred Vendors</button>
              </div>

              <div class="form-group">
                <label  for="product">Product</label>
                <input type="text" name="product" (input)="filterProducts()" [(ngModel)]="asset.product" required  value="{{product}}">
                <select [(ngModel)]="asset.product" (change)="filterProducts()" >
                  <option *ngFor="let product of filtredProducts | slice:0:100" [value]="product" (click)="filltheBlacks3(product)">{{ product }}</option>
                </select>
              </div>

              <div class="form-group">
                <label  for="version">Version</label>
                <input type="text" name="version" [(ngModel)]="asset.version" (input)="filterVersions()" required  value="{{version}}">
                <select [(ngModel)]="asset.version" (change)="filterVersions()">
                  <option *ngFor="let version of filtredVersions | slice:0:100" [value]="version" >{{ version }}</option>
                </select>
              </div>




                          !!!!!!!!!!!!!!!!!! ATTENTION !!!!!!!!!!!!!!!!!!!!-->









  
           
              <div class="modal-footer">
                <button  type="button" (click)="AddOneAsset()" class="btn btn-primary" [disabled]="FormNotValidated(asset)">Save</button>
                <button  type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
 <!-- Delete Confirmation Modal -->
 <div class="modal fade" id="DeleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5  class="modal-title" id="exampleModalLabel">Confirm Delete</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h5 >Are you sure you want to delete this asset?</h5>
      </div>
      <div class="modal-footer">
        <button  type="button" class="delete-button" data-bs-dismiss="modal" (click)="deleteAsset(tempAssetId)">Yes</button>
        <button  type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

 <!-- Update Confirmation Modal -->
 <div class="modal fade" id="UpdateConfirmationModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5  class="modal-title" id="exampleModalLabel">Confirm Changes</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div  class="modal-body">
        <h5 >Are you sure you want to Confirm these Changes?</h5>
      </div>
      <div class="modal-footer">
        <button  type="button" class="delete-button" data-bs-dismiss="modal" (click)="updateAsset(tempAssetId)">Yes</button>
        <button  type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- Update Modal -->
<div class="modal fade" id="UpdateModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5  class="modal-title" id="exampleModalLabel">Update Asset</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="form-container">
          <!-- Other form fields... -->


          <div class="form-group">
            <label  for="type">Type</label>
            <select name="type" [(ngModel)]="asset.type" >
              <option >software</option>
              <option >hardware</option>
              <option >people</option>
              <option >object</option>
            </select>
          </div>

          

          <label class="custom-label" for="vendors">Vendor</label>
              
          <div class="custom-left-aligned-container">
            <div class="custom-input-container">
              <div class="custom-input-wrapper">
                <ejs-autocomplete [(ngModel)]="asset.vendor" id="vendors" #remote [dataSource]="Vendors" [suggestionCount]="suggestionCount"
                  filterType="StartsWith" [autofill]="true" [placeholder]="remoteWaterMark" sortOrder="Ascending"
                  (click)="showSuggestions()">
                </ejs-autocomplete>
              </div>
            </div>
          </div>
          <label class="custom-label" for="name">Product</label>
          
          <div class="custom-left-aligned-container">
            <div class="custom-input-container">
              <div class="custom-input-wrapper">
                <ejs-autocomplete [(ngModel)]="asset.product" id="products" #remoteProduct [dataSource]="ProductListe"
                  [suggestionCount]="suggestionCount" filterType="StartsWith" [autofill]="true" [placeholder]="remoteWaterMark"
                  sortOrder="Ascending" (click)="filltheBlanks2(asset.vendor)">
                </ejs-autocomplete>
              </div>
            </div>
          </div>
          <label class="custom-label" for="name">Version</label>
          <div class="custom-left-aligned-container">
            <div class="custom-input-container">
              <div class="custom-input-wrapper">
                
                <ejs-autocomplete [(ngModel)]="asset.version" id="version" #remoteVersion [dataSource]="VersionListe"
                  [suggestionCount]="suggestionCount" filterType="StartsWith" [autofill]="true" [placeholder]="remoteWaterMark"
                  sortOrder="Ascending" (click)="filltheBlacks3(asset.product)">
                </ejs-autocomplete>
              </div>
            </div>
          </div>
          

        

       


      



       


          
          







         
        </div>
      </div>
      <div class="modal-footer">
        <button   class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#UpdateConfirmationModal" [disabled]="FormNotValidated(asset)">Save Changes</button>
        <button  type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>


  <table class="asset-table">
    <thead>
      <tr>
        <th  >Type</th>
        <th >Name</th>
        <th >Vendor</th>
        <th >Product</th>
        <th >Version</th>
        <th >Date</th>

        <th  class="action-column">Action</th>
        </tr>
    </thead>
    <tbody *ngFor="let asset of assets">
      <tr>
        <td>{{ asset.type }}</td>
        <td>{{ asset.name }}</td>
        <td>{{ asset.vendor }}</td>
        <td>{{ asset.product }}</td>
        <td>{{ asset.version }}</td>
        <td>{{ asset.date }}</td>

        <td>
          <button  class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#DeleteModal" (click)="setTempAssetId(asset.id)">Delete</button>
          <button  class="btn btn-info" data-bs-toggle="modal" data-bs-target="#UpdateModal" (click)="setTempAssetIdAndFillTheBlacks(asset.id)">Update</button>
        </td>
        
      </tr>
    </tbody>
  </table>
</div>




<!--<button type="button" (click)="returnDict()">returnDict</button>
<button type="button" (click)="show()">show</button>-->









<!-- Premier commentaire
<button (click)="afficher()">afficher</button>

<br>

<label for="myCombobox"> enter a CpeName:</label>

<datalist id="Cpenames">

  <div *ngFor="let cpeName of Cpenames">

    <option value="{{cpeName}}">

  </div>
</datalist>
-->



<!-- 2eme commentaire
<input [(ngModel)]="searchTerm" (input)="filterCpeNames()" placeholder="Saisir quelque chose...">


<select [(ngModel)]="searchTerm" (change)="filterCpeNames()">
  <option *ngFor="let cpename of filteredCpeNames" [value]="cpename" (click)="splitSearchTerm()">{{ cpename }}</option>
</select>
<br>
<input type="text" name="" id="" value="{{vendor}}">
<br>
<input type="text" name="" id="" value="{{product}}">
<br>
<input type="text" name="" id="" value="{{version}}"> 


-->


    
